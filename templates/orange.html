<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>orange</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="/static/orange.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            show_comment();
        });

        function show_comment() {
            $.ajax({
                type: 'GET',
                url: '/teampj',
                data: {},
                success: function (response) {
                    let rows = response['comments']
                    for(let i = 0; i < rows.length; i++){
                        let name = rows[i]['name']
                        let comment = rows[i]['comment']
                        let num = rows[i]['num']

                        let temp_html = `<div class="commentbox">
                                            <div>
                                                <p>${comment}</p>
                                                <footer class="blockquote-footer">${name}</footer>
                                            </div>
                                            <div>
                                                <input type="password" class="form-control" id="deletePw" placeholder="비밀번호">
                                                <button onclick= "delete_comment(${num})" type="button" class="btn btn-dark"> 삭제하기 </button>
                                            </div>
                                        </div>`
                        $('#comment-list').append(temp_html)
                    }
                }
            });
        }

        function save_comment() {
            let name = $('#name').val()
            let comment = $('#comment').val()
            let pw = $('#pw').val()

            $.ajax({
                type: 'POST',
                url: '/teampj',
                data: { name_give : name, comment_give : comment, pw_give : pw},
                success: function (response) {
                    alert(response['msg'])
                    window.location.reload()
                }
            });
        }
        function delete_comment(num){
            let deletepw = $('#deletePw').val()
            console.log(num)
            $.ajax({
                type: "POST",
                url: "/comment/delete",
                data: {deletepw_give:deletepw, num_give : num},
                success: function (response) {
                    alert(response["msg"])
                    window.location.reload()
                }
            });
        }
    </script>
</head>
<body>
    <div class="ground">
        <div class="background">
            <h1>주황색 자기소개</h1>
            <div id="introgrid">
                <img src="/static/MyPhoto_1203262320_0011.jpg" width="200px"  alt="자기소개 이미지">
                <div id="introduction">
                    안녕하세요 저는 주황색이죠<br>
                    그렇습니다 주황색이라고 할수있죠<br>
                    어떻게보면 저는 정말 주황색입니다<br>
                    그렇지 않습니까?<br>
                    저는 주황색을 사랑합니다<br>
                </div>
            </div>
            <div id="strength">
                객관적으로 살펴본 자신의 장점
            </div>
            <div id="mystyle">
                협업하는 과정에서 자신의 스타일
            </div>
            <div id="mbtigrid">
                <div id="mbti">
                    MBTI : ENFP
                </div>
                <div id="mymbti">
                    ENFP의 특징이라고 하신다면 대답해 드리는게 인지상정
                </div>
            </div>
            <div class="snsgrid">
                <div id="snscomment">
                    SNS,BLOG 구경하기
                </div>
                <div id="btnbolg">
                        <a href="https://5kiran.tistory.com/" target="_blank" class="btntstory">
                            <img src="/static/tstoryblog.png"
                                 alt="티스토리 블로그 이동" style="width: 40px"/>
                        </a>
                        <a href="https://blog.naver.com/ssses1" target="_blank" style="margin-left: 10px" class="btntstory">
                            <img src="/static/naverblog.png"
                                 alt="네이버 블로그 이동" style="width: 40px"/>
                        </a>
                        <a href="https://www.instagram.com/5__kiran/" target="_blank" style="margin-left: 10px" class="btntstory">
                            <img src="/static/instagram.png"
                                 alt="인스타그램 이동" style="width: 40px"/>
                        </a>
                </div>
            </div>
        </div>
        <div class ="guestcomment">
            <div id = "gusetbox">
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="name" placeholder="nick"
                           style="width: 200px">
                    <label for="name">닉네임</label>
                    <div class="col-auto">
                        <label for="pw" class="visually-hidden">비밀번호</label>
                        <input type="password" class="form-control" id="pw" placeholder="비밀번호">
                    </div>
                </div>
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Leave a comment here" id="comment"
                              style="height: 105px"></textarea>
                    <label for="comment">응원을 남겨주세요</label>
                </div>
            </div>
            <button onclick= "save_comment()" type="button" class="btn btn-dark"> 등록하기 </button>
            <div id="comment-list">
            </div>
        </div>
    </div>
</body>
</html>